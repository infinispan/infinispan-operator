[id="using-service-account-token-secret-{context}"]
= Using a service account token secret

[role="_abstract"]
The tokens that you generate in the following procedure do not expire.

.Prerequisites

* You have created a service account.

.Procedure

. Log in to your {openshiftshort} cluster.

. Create a service account token secret file as follows.
+
.sa-token.yaml
[source,yaml,options="nowrap",subs=attributes+]
----
include::yaml/xsite_sa_token.yaml[]
----
<1> Specifies the name of the secret.
<2> Specifies the service account name.

. Create the secret in your {openshiftshort} cluster.
+
[source,bash,options="nowrap",subs=attributes+]
----
oc -n <namespace> create -f sa-token.yaml
----

. Retrieve the service account token.
+
[source,bash,options="nowrap",subs=attributes+]
----
oc -n <namespace> get secrets ispn-xsite-sa-token -o jsonpath="{.data.token}" | base64 -d
----
+
The command prints the token in the terminal.
. Copy the token to deploy it in the backup {openshiftshort} cluster(s).

. Log in to the backup {openshiftshort} cluster(s).

. Add the service account token for a backup location:
+
[source,bash,options="nowrap",subs=attributes+]
----
oc -n <namespace> create secret generic <token-secret> --from-literal=token=<token>
----
+
The `<token-secret>` is the name of the secret that needs to be configured in the `Infinispan` CR.

.Next steps

* Repeat the preceding steps on your other {openshiftshort} clusters.