[id='anti-affinity-strategies_{context}']
= Anti-affinity strategy configurations
Configure anti-affinity strategies in your `Infinispan` CR to control where {k8s} schedules {brandname} replica pods.

[discrete]
== Schedule pods on different {k8s} nodes

The following is the anti-affinity strategy that {ispn_operator} uses if you do not configure the `spec.affinity` field in your `Infinispan` CR:

[source,yaml,options="nowrap",subs=attributes+]
----
include::yaml/affinity_nodes_prefer.yaml[]
----

.Requiring different nodes

[source,yaml,options="nowrap",subs=attributes+]
----
include::yaml/affinity_nodes_require.yaml[]
----

[NOTE]
====
To ensure that you can schedule {brandname} replica pods on different {k8s} nodes, the number of {k8s} nodes available must be greater than the value of `spec.replicas`.
====

[discrete]
== Schedule pods across multiple {k8s} zones

The following example prefers multiple zones when scheduling pods:

[source,yaml,options="nowrap",subs=attributes+]
----
include::yaml/affinity_zones_prefer.yaml[]
----

.Requiring multiple zones

[source,yaml,options="nowrap",subs=attributes+]
----
include::yaml/affinity_zones_require.yaml[]
----
