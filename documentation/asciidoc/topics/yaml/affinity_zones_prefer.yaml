spec:
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      # Sets the zone strategy as most preferred.
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app: infinispan-pod
              clusterName: <cluster_name>
              infinispan_cr: <cluster_name>
          #Schedules {brandname} replica pods across multiple zones.
          topologyKey: "topology.kubernetes.io/zone"
      # Sets the hostname strategy as next preferred.
      - weight: 90
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app: infinispan-pod
              clusterName: <cluster_name>
              infinispan_cr: <cluster_name>
          # Schedules {brandname} replica pods on different {k8s} nodes if it is not possible to schedule across zones.
          topologyKey: "kubernetes.io/hostname"
