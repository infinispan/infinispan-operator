# Authorization
By default Authorization is disabled to ensure backwards compatibility with existing Infinispan CRs

## Enabling Authorization
To enable authorization the following needs to be defined in the `.spec`:

```yaml
spec:
  security:
    authorization:
      # defaults to false
      enabled: true
```

Only the cluster-role-mapper is currently supported. By default this means that the following roles are available:

`admin`, `deployer`, `application`, `observer`, `monitor`

For more details about these roles and their associated permissions, see the [security docs](https://infinispan.org/docs/stable/titles/security/security.html#user-roles-permissions_authz)

## Defining additional roles
Additional roles can be defined via the Infinispan CR spec:

```yaml
spec:
  security:
    authorization:
      enabled: true
      # Optional
      roles:
        - name: role-name-1
          permissions:
            - ALL
        - name: role-name-2
          permissions:
            - READ
            - WRITE
```

## Generated credentials
Any credentials generated by the operator have the "admin" role.

## Assigning roles to users
Users are assigned roles as part of the "identities.yaml" file that is configured via the `spec.endpointSecretName` secret:

```yaml
credentials:
  - username: admin
    password: pass
    roles:
      - admin
  - username: some-user
    password: pass
    roles:
      - monitor
```
